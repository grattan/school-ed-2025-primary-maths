---
title: "LSAY_EDA"
format: html
editor: visual
---

```{r}
library(haven)
library(tidyverse)
library(dplyr)
LSAY2015 <- read_dta("data/lsay_data/LSAY_Y15.dta")
LSAY2003 <- read_dta("data/lsay_data/LSAY_Y03.dta")
LSAY2006 <- read_dta("data/lsay_data/LSAY_Y06.dta")
LSAY2009 <- read_dta("data/lsay_data/LSAY_Y09.dta")

```


ASCED code looking for 070103 (Teacher Education: Primary)
Looking at field of study: Main area of study/training in this course.

How many primary school teachers are in the data set?

```{r}
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1

UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
  # selecting variables for current area of study
  select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
  # Mutate across the observation to replace 0 = not '70103', 1 = is '70103'
  mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088),
                ~ case_when(
                   as.character(.) == '70103' ~ 1,  # PSE as 1
                   is.na(.) ~ NA_integer_, # Retain NA
                   TRUE ~ 0  # All else as 0
                 ))) %>%
  # Create new column where any 1 in the row = TRUE, no 1 = FALSE
  mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
  # Keep TRUE values
  filter(unique_teachers)

UNIQUE_CURRENT_TEACHERS


```


```{r}
# taking a deeper look at  student id 2659 and 9362
# looking at variable LHC087
closer_look <- LSAY2003 %>% 
  filter(STIDSTD %in% c(2659, 10049)) %>% 
  select(STIDSTD, LDCZ087, LHC087)
closer_look
```
Student 2659 went into another field of study four years after: Business management
Student 10049 went into another field of study four years after too??: Human Movement

* How many are working as primary school teachers
-  Look for legit teachers
- ^ same method

```{r}

UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
  # Selecting variables for kind of work
  select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
  # Mutate across the observation 
  mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029),
                ~ case_when(
                   as.character(.) == '2412' ~ 1,  # PSE as 1
                   is.na(.) ~ NA_integer_,
                   TRUE ~ 0  # All else as 0
                 ))) %>%
  # column for TRUE = legit teachers, FALSE = not teachers
  mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
  # Filter for TRUE condition
  filter(legit_teachers)

UNIQUE_LEGIT_TEACHERS

 
```


```{r}
# SEEING THE AMOUNT PEOPLE WHO WERE PRIMARY SCHOOL TEACHERS AT ANY POINT

UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
  # SELECTING VARIABLES FOR WHAT TYPE OF WORK DO YOU DO
  select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
  # CHARACTER TYPE ACROSS
  mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) %>%
  # MUTATE ACROSS THE OBSERVATION 0 = NOT TEACHER, 1 = TEACHER, NA = NA. 
  mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
    . == '2412' ~ 1, #TEACHER AS 1
    is.na(.) ~ NA_integer_,
    TRUE ~ 0 # NON-TEACHER AS 0
  ))) %>%
  # CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
  mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
  filter(legit_teachers) #FILTER FOR TRUE CONDITION

UNIQUE_LEGIT_TEACHERS

```

What did these people study?

```{r}
# Taking a look at what the legit teachers studied
teacher_jobs <- LSAY2003[LSAY2003$STIDSTD %in% UNIQUE_LEGIT_TEACHERS$STIDSTD, ]

# selecting student ID and area of study across the years
selected_columns <- c('STIDSTD', 'LBCZ087', 'LCCZ087', 'LDCZ087', 'LEC087', 'LFC087', 'LGC087', 'LHC087', 'LIC087', 'LJC088', 'LKC088')
teacher_jobs <- teacher_jobs[, selected_columns]

teacher_jobs
```

