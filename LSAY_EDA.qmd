---
title: "LSAY_EDA"
format: html
editor: visual
---

```{r}
library(haven)
library(tidyverse)
library(dplyr)
LSAY2015 <- read_dta("data/lsay_data/LSAY_Y15.dta")
LSAY2003 <- read_dta("data/lsay_data/LSAY_Y03.dta")
LSAY2006 <- read_dta("data/lsay_data/LSAY_Y06.dta")
LSAY2009 <- read_dta("data/lsay_data/LSAY_Y09.dta")

```

ASCED code looking for 070103 (Teacher Education: Primary) Looking at field of study: Main area of study/training in this course.

## Y03

How many primary school teachers are in the data set?

```{r}
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1

UNIQUE_STUDYING_TEACHERS <- LSAY2003 %>%
  # selecting variables for current area of study
  select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
  # Mutate across the observation to replace 0 = not '70103', 1 = is '70103'
  mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088),
                ~ case_when(
                   as.character(.) == '70103' ~ 1,  # PSE as 1
                   is.na(.) ~ NA_integer_, # Retain NA
                   TRUE ~ 0  # All else as 0
                 ))) %>%
  # Create new column where any 1 in the row = TRUE, no 1 = FALSE
  mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
  # Keep TRUE values
  filter(unique_teachers)

UNIQUE_STUDYING_TEACHERS


```

```{r}
# taking a deeper look at  student id 2659 and 9362
# looking at variable LHC087
closer_look <- LSAY2003 %>% 
  filter(STIDSTD %in% c(2659, 10049)) %>% 
  select(STIDSTD, LDCZ087, LHC087)
closer_look
```

Student 2659 went into another field of study four years after: Business management Student 10049 went into another field of study four years after too??: Human Movement

-   How many are working as primary school teachers
-   Look for legit teachers

```{r}

UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
  # Selecting variables for kind of work
  select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
  # Mutate across the observation 
  mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029),
                ~ case_when(
                   as.character(.) == '2412' ~ 1,  # PSE as 1
                   is.na(.) ~ NA_integer_,
                   TRUE ~ 0  # All else as 0
                 ))) %>%
  # column for TRUE = legit teachers, FALSE = not teachers
  mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
  # Filter for TRUE condition
  filter(legit_teachers)

UNIQUE_LEGIT_TEACHERS

 
```

```{r}
# SEEING THE AMOUNT PEOPLE WHO WERE PRIMARY SCHOOL TEACHERS AT ANY POINT

UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
  # SELECTING VARIABLES FOR WHAT TYPE OF WORK DO YOU DO
  select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
  # CHARACTER TYPE ACROSS
  mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) %>%
  # MUTATE ACROSS THE OBSERVATION 0 = NOT TEACHER, 1 = TEACHER, NA = NA. 
  mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
    . == '2412' ~ 1, #TEACHER AS 1
    is.na(.) ~ NA_integer_,
    TRUE ~ 0 # NON-TEACHER AS 0
  ))) %>%
  # CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
  mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
  filter(legit_teachers) #FILTER FOR TRUE CONDITION

UNIQUE_LEGIT_TEACHERS

```

What did these people study?

```{r}
# Taking a look at what the legit teachers studied
teacher_jobs <- LSAY2003[LSAY2003$STIDSTD %in% UNIQUE_LEGIT_TEACHERS$STIDSTD, ]

# selecting student ID and area of study across the years
selected_columns <- c('STIDSTD', 'LBCZ087', 'LCCZ087', 'LDCZ087', 'LEC087', 'LFC087', 'LGC087', 'LHC087', 'LIC087', 'LJC088', 'LKC088')
teacher_jobs <- teacher_jobs[, selected_columns]



```

+-----------------+------------------------------------------------------+
| Codes           | Field of Education                                   |
+=================+======================================================+
| 70101           | Teacher Education: Early Childhood                   |
+-----------------+------------------------------------------------------+
| 70103           | Teacher Education: Primary                           |
+-----------------+------------------------------------------------------+
| 70109           | Teacher Education: Vocational Education and Training |
+-----------------+------------------------------------------------------+
| 70199           | Teacher Education, n.e.c.                            |
|                 |                                                      |
|                 | -   special needs                                    |
+-----------------+------------------------------------------------------+
| 70115           | English as a Second Language Teaching                |
+-----------------+------------------------------------------------------+
| 90503           | Children's Services                                  |
|                 |                                                      |
|                 | (Human Welfare Studies and Services)                 |
+-----------------+------------------------------------------------------+
| 91703           | Religious Studies                                    |
|                 |                                                      |
|                 | (Philosophy and Religious Studies)                   |
+-----------------+------------------------------------------------------+
| 92101           | Sport and Recreation Activities                      |
|                 |                                                      |
|                 | (Sport and Recreation)                               |
+-----------------+------------------------------------------------------+
| 100101          | Music                                                |
|                 |                                                      |
|                 | (Performing Arts)                                    |
+-----------------+------------------------------------------------------+
| 80101           | Accounting                                           |
+-----------------+------------------------------------------------------+

Questions about the data:

-   Teachers respondent rate (one year they respond and then all the other years they don't) but are asked similar questions

-   Teacher Education, n.e.c.

```{r}
# How many school leavers enrol in primary school teaching courses
#taking the IDs of individuals who had enrolled in primary school teaching at some point
studying_teachers <- unique(UNIQUE_STUDYING_TEACHERS$STIDSTD)
# filter the LSAY2003 data for those IDs and high school leaving variables.
studying_teachers_y12 <- LSAY2003 %>% 
  filter(STIDSTD %in% studying_teachers) %>% 
  select(STIDSTD, LBWDV01, LCWDV01, LEWDV01, LIWDV01) %>%
   mutate(Studying_Teacher = rowSums(select(., LBWDV01, LCWDV01, LEWDV01, LIWDV01) == 1, na.rm = TRUE) > 0)

```

Only two of those studying primary school teaching in 2003 LSAY were school leavers. However both seemed to have return back to school to complete.

What year level were these two when they left (cross-check to determine if its one year)

2999 & 10049 (leavers)

```{r}
# closer look at the school leavers (year and level)
school_leavers_year_level <- LSAY2003 %>% 
  filter(STIDSTD %in% c(2999, 10049)) %>% 
  select(STIDSTD, LBB001, LCB001, LDB001, LEB001, LEA005, LFB001, LFA006)
school_leavers_year_level
```

Both left in year 11.

```{r}
school_leavers_year <- LSAY2003 %>% 
  filter(STIDSTD %in% c(2999, 10049)) %>% 
  select(STIDSTD, LBA002B, LCA002B, LDA002B, LEA002B, LFA002Y)
school_leavers_year
```

2999 LEFT IN 2003, 10049 LEFT IN 2004. \* 2999 left in 2003 then went back to complete year 12 in 2005 \* 10049 left in 2004 and then went back to complete year 12 in 2005.

# PISA PVs

-   Determine the percentage of primary teachers in the sample below the National proficient standard

-   Determine the average achievement of primary teachers in the sample (in PISA points)

```{r}
# understanding PVs (exploratory understanding)
library(intsvy)
pisa.mean.pv(pvlabel = paste0("PV", 1:5, "MATH"), by = "STATEID", data = LSAY2003)
# calculate average mathematics score by state PV1MATH - PV5MATH
```

1 = ACT, 2 = NSW, 3 = VIC, 4 = QLD, 5 = SA, 6 = WA, 7 = TAS, 8 = NT

https://www.acer.org/files/PISA_screen.pdf

" In mathematical literacy, the average performance of students in the Australian Capital Territory was significantly higher than the average achieved by students in New South Wales, Queensland, Victoria, Tasmania and the Northern Territory, and students from the Australian Capital Territory, Western Australia, South Australia, New South Wales and Queensland attained a higher average score than students in the Northern Territory. However, the performance of students in Victoria and Tasmania was not significantly different from the performance of students in the Northern Territory. These differences are more pronounced than those in maths in PISA 2000, perhaps because this measure of mathematical literacy is better defined, being the focus of PISA 2003. "


```{r}

```

