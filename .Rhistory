library(haven)
library(tidyverse)
library(dplyr)
LSAY2015 <- read_dta("data/lsay_data/LSAY_Y15.dta")
LSAY2003 <- read_dta("data/lsay_data/LSAY_Y03.dta")
LSAY2006 <- read_dta("data/lsay_data/LSAY_Y06.dta")
LSAY2009 <- read_dta("data/lsay_data/LSAY_Y09.dta")
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
# SELECTING STUDENT ID
UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# MUTATE ACROSS THE OBSERVATION TO REPLACE 0 = NOT '70103', 1 = IS '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ case_when(
. == '70103' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
filter(unique_teachers) #FILTER FOR TRUE CONDITION
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
# SELECTING STUDENT ID
UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# MUTATE ACROSS THE OBSERVATION TO REPLACE 0 = NOT '70103', 1 = IS '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ case_when(
. == '70103' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
filter(unique_teachers) #FILTER FOR TRUE CONDITION
# SEEING THE AMOUNT PEOPLE WHO WERE PRIMARY SCHOOL TEACHERS AT ANY POINT
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES FOR WHAT TYPE OF WORK DO YOU DO
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# CHARACTER TYPE ACROSS
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) %>%
# MUTATE ACROSS THE OBSERVATION 0 = NOT TEACHER, 1 = TEACHER, NA = NA.
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
. == '2412' ~ 1, #TEACHER AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # NON-TEACHER AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
filter(legit_teachers) #FILTER FOR TRUE CONDITION
UNIQUE_LEGIT_TEACHERS
# Taking a look at what the legit teachers studied
teacher_jobs <- LSAY2003[LSAY2003$STIDSTD %in% UNIQUE_LEGIT_TEACHERS$STIDSTD, ]
# selecting student ID and area of study across the years
selected_columns <- c('STIDSTD', 'LBCZ087', 'LCCZ087', 'LDCZ087', 'LEC087', 'LFC087', 'LGC087', 'LHC087', 'LIC087', 'LJC088', 'LKC088')
teacher_jobs <- teacher_jobs[, selected_columns]
teacher_jobs
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# MUTATE ACROSS THE OBSERVATION
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
. == '2412' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
filter(legit_teachers) #FILTER FOR TRUE CONDITION
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# MUTATE ACROSS THE OBSERVATION
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) ~ case_when(
. == '2412' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# MUTATE ACROSS THE OBSERVATION
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character) ~ case_when(
. == '2412' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
# SELECTING STUDENT ID
UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# MUTATE ACROSS THE OBSERVATION TO REPLACE 0 = NOT '70103', 1 = IS '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ case_when(
. == '70103' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
filter(unique_teachers) #FILTER FOR TRUE CONDITION
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
# SELECTING STUDENT ID
UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# MUTATE ACROSS THE OBSERVATION TO REPLACE 0 = NOT '70103', 1 = IS '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ case_when(
. == '70103' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
filter(unique_teachers) #FILTER FOR TRUE CONDITION
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
# Selecting variables of current area of study
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# Mutate across the observation to replace 0 = not '70103', 1 = is '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088),
~ case_when(
as.character(.) == '70103' ~ 1,  # PSE as 1
is.na(.) ~ NA_integer_,
TRUE ~ 0  # All else as 0
))) %>%
# Create new column where any 1 in the row = TRUE, no 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
# Filter for TRUE condition
filter(unique_teachers)
UNIQUE_CURRENT_TEACHERS
# taking a deeper look at  student id 2659 and 9362
# looking at variable LHC087
closer_look <- LSAY2003 %>%
filter(STIDSTD %in% c(2659, 10049)) %>%
select(STIDSTD, LDCZ087, LHC087)
closer_look
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES OF CURRENT AREA OF STUDY
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# MUTATE ACROSS THE OBSERVATION
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
. == '2412' ~ 1, #PSE AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # ALL ELSE AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
filter(legit_teachers) #FILTER FOR TRUE CONDITION
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# Selecting variables of current area of study
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# Mutate across the observation
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029),
~ case_when(
as.character(.) == '2412' ~ 1,  # PSE as 1
is.na(.) ~ NA_integer_,
TRUE ~ 0  # All else as 0
))) %>%
# Create new column where any 1 in the row = TRUE, no 1 = FALSE
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
# Filter for TRUE condition
filter(legit_teachers)
UNIQUE_LEGIT_TEACHERS
# SEEING THE AMOUNT PEOPLE WHO WERE PRIMARY SCHOOL TEACHERS AT ANY POINT
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES FOR WHAT TYPE OF WORK DO YOU DO
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# CHARACTER TYPE ACROSS
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) %>%
# MUTATE ACROSS THE OBSERVATION 0 = NOT TEACHER, 1 = TEACHER, NA = NA.
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
. == '2412' ~ 1, #TEACHER AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # NON-TEACHER AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
filter(legit_teachers) #FILTER FOR TRUE CONDITION
UNIQUE_LEGIT_TEACHERS
# Taking a look at what the legit teachers studied
teacher_jobs <- LSAY2003[LSAY2003$STIDSTD %in% UNIQUE_LEGIT_TEACHERS$STIDSTD, ]
# selecting student ID and area of study across the years
selected_columns <- c('STIDSTD', 'LBCZ087', 'LCCZ087', 'LDCZ087', 'LEC087', 'LFC087', 'LGC087', 'LHC087', 'LIC087', 'LJC088', 'LKC088')
teacher_jobs <- teacher_jobs[, selected_columns]
teacher_jobs
LSAY2003 <- read_dta("data/lsay_data/LSAY_Y03.dta")
library(haven)
library(tidyverse)
library(dplyr)
LSAY2003 <- read_dta("data/lsay_data/LSAY_Y03.dta")
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
UNIQUE_CURRENT_TEACHERS <- LSAY2003 %>%
# selecting variables for current area of study
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# Mutate across the observation to replace 0 = not '70103', 1 = is '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088),
~ case_when(
as.character(.) == '70103' ~ 1,  # PSE as 1
is.na(.) ~ NA_integer_, # Retain NA
TRUE ~ 0  # All else as 0
))) %>%
# Create new column where any 1 in the row = TRUE, no 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
# Keep TRUE values
filter(unique_teachers)
UNIQUE_CURRENT_TEACHERS
# taking a deeper look at  student id 2659 and 9362
# looking at variable LHC087
closer_look <- LSAY2003 %>%
filter(STIDSTD %in% c(2659, 10049)) %>%
select(STIDSTD, LDCZ087, LHC087)
closer_look
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# Selecting variables for kind of work
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# Mutate across the observation
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029),
~ case_when(
as.character(.) == '2412' ~ 1,  # PSE as 1
is.na(.) ~ NA_integer_,
TRUE ~ 0  # All else as 0
))) %>%
# column for TRUE = legit teachers, FALSE = not teachers
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
# Filter for TRUE condition
filter(legit_teachers)
UNIQUE_LEGIT_TEACHERS
# SEEING THE AMOUNT PEOPLE WHO WERE PRIMARY SCHOOL TEACHERS AT ANY POINT
UNIQUE_LEGIT_TEACHERS <- LSAY2003 %>%
# SELECTING VARIABLES FOR WHAT TYPE OF WORK DO YOU DO
select(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) %>%
# CHARACTER TYPE ACROSS
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) %>%
# MUTATE ACROSS THE OBSERVATION 0 = NOT TEACHER, 1 = TEACHER, NA = NA.
mutate(across(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ case_when(
. == '2412' ~ 1, #TEACHER AS 1
is.na(.) ~ NA_integer_,
TRUE ~ 0 # NON-TEACHER AS 0
))) %>%
# CREATE NEW COLUMN WHERE ANY 1 IN THE ROW = TRUE, NO 1 = FALSE
mutate(legit_teachers = if_any(c(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), ~ . == 1)) %>%
filter(legit_teachers) #FILTER FOR TRUE CONDITION
UNIQUE_LEGIT_TEACHERS
# Taking a look at what the legit teachers studied
teacher_jobs <- LSAY2003[LSAY2003$STIDSTD %in% UNIQUE_LEGIT_TEACHERS$STIDSTD, ]
# selecting student ID and area of study across the years
selected_columns <- c('STIDSTD', 'LBCZ087', 'LCCZ087', 'LDCZ087', 'LEC087', 'LFC087', 'LGC087', 'LHC087', 'LIC087', 'LJC088', 'LKC088')
teacher_jobs <- teacher_jobs[, selected_columns]
teacher_jobs
# Taking a look at what the legit teachers studied
teacher_jobs <- LSAY2003[LSAY2003$STIDSTD %in% UNIQUE_LEGIT_TEACHERS$STIDSTD, ]
# selecting student ID and area of study across the years
selected_columns <- c('STIDSTD', 'LBCZ087', 'LCCZ087', 'LDCZ087', 'LEC087', 'LFC087', 'LGC087', 'LHC087', 'LIC087', 'LJC088', 'LKC088')
teacher_jobs <- teacher_jobs[, selected_columns]
teacher_jobs
unique(teacher_jobs)
unique <- unique(teacher_jobs)
unique
#to see the unique ASCED codes
teacher_na_removed <- na.omit(teacher_unique)
#to see the unique ASCED codes
teacher_na_removed <- na.omit(teacher_jobs)
unique_ASCED <- unique(teacher_na_removed)
print(unique_ASCED)
View(unique_ASCED)
unique(teacher_jobs)
#0 and 1 if 70103
#sum rows function
#filter if it is greater than or equal to 1
UNIQUE_STUDYING_TEACHERS <- LSAY2003 %>%
# selecting variables for current area of study
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) %>%
# Mutate across the observation to replace 0 = not '70103', 1 = is '70103'
mutate(across(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088),
~ case_when(
as.character(.) == '70103' ~ 1,  # PSE as 1
is.na(.) ~ NA_integer_, # Retain NA
TRUE ~ 0  # All else as 0
))) %>%
# Create new column where any 1 in the row = TRUE, no 1 = FALSE
mutate(unique_teachers = if_any(c(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), ~ . == 1)) %>%
# Keep TRUE values
filter(unique_teachers)
UNIQUE_STUDYING_TEACHERS
# How many school leavers enrol in primary school teaching courses
#taking the IDs of individuals who had enrolled in primary school teaching at some point
studying_teachers <- unique(UNIQUE_STUDYING_TEACHERS$STIDSTD)
studying_teachers
# How many school leavers enrol in primary school teaching courses
#taking the IDs of individuals who had enrolled in primary school teaching at some point
studying_teachers <- unique(UNIQUE_STUDYING_TEACHERS$STIDSTD)
# filter the LSAY2003 data for those IDs and high school leaving variables.
studying_teachers_y12 <- LSAY2003 %>%
filter(STIDSTD %in% studying_teachers) %>%
select(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088)
studying_teachers_y12
# How many school leavers enrol in primary school teaching courses
#taking the IDs of individuals who had enrolled in primary school teaching at some point
studying_teachers <- unique(UNIQUE_STUDYING_TEACHERS$STIDSTD)
# filter the LSAY2003 data for those IDs and high school leaving variables.
studying_teachers_y12 <- LSAY2003 %>%
filter(STIDSTD %in% studying_teachers) %>%
select(STIDSTD, LBWDV01, LCWDV01, LEWDV01, LIWDV01)
studying_teachers_y12
# How many school leavers enrol in primary school teaching courses
#taking the IDs of individuals who had enrolled in primary school teaching at some point
studying_teachers <- unique(UNIQUE_STUDYING_TEACHERS$STIDSTD)
# filter the LSAY2003 data for those IDs and high school leaving variables.
studying_teachers_y12 <- LSAY2003 %>%
filter(STIDSTD %in% studying_teachers) %>%
select(STIDSTD, LBWDV01, LCWDV01, LEWDV01, LIWDV01) %>%
mutate(Studying_Teacher = rowSums(select(., LBWDV01, LCWDV01, LEWDV01, LIWDV01) == 1, na.rm = TRUE) > 0)
studying_teachers
studying_teachers_y12
# closer look at the school leavers (year and level)
school_leavers <- LSAY2003 %>%
filter(STIDSTD %in% c(2999, 10049)) %>%
select(STIDSTD, LBB001, LCB001, LDB001, LEB001, LEA005, LFB001, LFA006)
# closer look at the school leavers (year and level)
school_leavers <- LSAY2003 %>%
filter(STIDSTD %in% c(2999, 10049)) %>%
select(STIDSTD, LBB001, LCB001, LDB001, LEB001, LEA005, LFB001, LFA006)
school_leavers
school_leavers_year <- LSAY2003 %>%
filter(STIDSTD %in% c(2999, 10049)) %>%
select(STIDSTD, LBA002B, LCA002B, LDA002B, LEA002B, LFA002Y)
school_leavers_year
View(LSAY2003)
# understanding PVs (exploratory understanding)
LSAY2003 %>% summarize(sum=sum(W_FSTUWT))
install.packages("intsvy")
# understanding PVs (exploratory understanding)
pisa.mean.pv(pvlabel = paste0("PV", 1:10, "MATH"), by = "STATEID", data = LSAY2003)
# understanding PVs (exploratory understanding)
library(intsvy)
pisa.mean.pv(pvlabel = paste0("PV", 1:10, "MATH"), by = "STATEID", data = LSAY2003)
library(haven)
library(tidyverse)
library(dplyr)
# understanding PVs (exploratory understanding)
library(intsvy)
pisa.mean.pv(pvlabel = paste0("PV", 1:10, "MATH"), by = "STATEID", data = LSAY2003)
# understanding PVs (exploratory understanding)
# Load necessary libraries
library(intsvy)
library(dplyr)
# Check for missing values in the data
summary(LSAY2003)
# Select a single PV and check its length and missing values
pv_col <- paste0("PV", 1, "MATH")
weight_col <- "STATEID"
# Ensure there are no missing values
LSAY2003 <- LSAY2003 %>%
filter(!is.na(get(pv_col)), !is.na(get(weight_col)))
# Calculate mean for a single PV
single_pv_mean <- weighted.mean(LSAY2003[[pv_col]], LSAY2003[[weight_col]], na.rm = TRUE)
print(single_pv_mean)
# understanding PVs (exploratory understanding)
library(intsvy)
pisa.mean.pv(pvlabel = paste0("PV", 1:10, "MATH"), by = "STATEID", data = LSAY2003)
# understanding PVs (exploratory understanding)
library(intsvy)
pisa.mean.pv(pvlabel = paste0("PV", 1:25, "MATH"), by = "STATEID", data = LSAY2003)
# understanding PVs (exploratory understanding)
library(intsvy)
pisa.mean.pv(pvlabel = paste0("PV", 1:5, "MATH"), by = "STATEID", data = LSAY2003)
